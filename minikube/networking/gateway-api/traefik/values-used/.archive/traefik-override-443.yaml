# Full values override for traefik chart (v3.x)
# Ensures websecure -> 443, enables Gateway provider and exports service ports.

providers:
  kubernetesGateway:
    enabled: true

log:
  level: INFO

ports:
  web:
    port: 80
    exposedPort: 80
    protocol: TCP
    exposed: true
  websecure:
    port: 443
    exposedPort: 443
    protocol: TCP
    exposed: true
  traefik:
    port: 8080
    exposedPort: 8080
    protocol: TCP
    exposed: true
  metrics:
    port: 9100
    exposedPort: 9100
    protocol: TCP
    exposed: true
  # The chart sometimes references non-standard port keys (example 8000) â€” map a fallback if needed
  # if your chart templates reference additional custom ports, declare them here:
  # extra1:
  #   port: 8000
  #   exposedPort: 8000
  #   protocol: TCP
  #   exposed: false

additionalArguments:
  - "--entryPoints.web.address=:80/tcp"
  - "--entryPoints.websecure.address=:443/tcp"
  - "--entryPoints.websecure.http.tls=true"
  - "--providers.kubernetesgateway=true"
  - "--providers.kubernetescrd=true"
  - "--providers.kubernetesingress=true"
  - "--ping=true"
  - "--api.dashboard=true"

service:
  type: ClusterIP
  ports:
    traefik:
      port: 8080
      targetPort: traefik
    web:
      port: 80
      targetPort: web
    websecure:
      port: 443
      targetPort: websecure
    metrics:
      port: 9100
      targetPort: metrics

# Optional: if your chart uses 'service.publishedService' or statusaddress settings, keep them:
providers:
  kubernetesGateway:
    enabled: true

# Keep ingress/gateway automatic resources disabled if you prefer manual Gateway objects:
gateway:
  enabled: false

