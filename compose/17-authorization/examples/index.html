<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Vikash Kumar">
    <link rel="canonical" href="https://opsalchemy.github.io/kubequest/compose/17-authorization/examples/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Examples - CKA Exam Mastery</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../stylesheets/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "YAML Examples with Explanations", url: "#_top", children: [
              {title: "Example 1: Basic Role for Pod Reading", url: "#example-1-basic-role-for-pod-reading" },
              {title: "Example 2: RoleBinding for User", url: "#example-2-rolebinding-for-user" },
              {title: "Example 3: ClusterRole for Node Reading", url: "#example-3-clusterrole-for-node-reading" },
              {title: "Example 4: ClusterRoleBinding for Group", url: "#example-4-clusterrolebinding-for-group" },
              {title: "Example 5: Role with Multiple Resources", url: "#example-5-role-with-multiple-resources" },
              {title: "Example 6: Role with Specific Resource Names", url: "#example-6-role-with-specific-resource-names" },
              {title: "Example 7: Role for Subresources", url: "#example-7-role-for-subresources" },
              {title: "Example 8: ServiceAccount Binding", url: "#example-8-serviceaccount-binding" },
              {title: "Example 9: Cross-Namespace ServiceAccount Access", url: "#example-9-cross-namespace-serviceaccount-access" },
              {title: "Example 10: ClusterRole Bound to Namespace", url: "#example-10-clusterrole-bound-to-namespace" },
              {title: "Example 11: Role with API Group Specific Resources", url: "#example-11-role-with-api-group-specific-resources" },
              {title: "Example 12: Role with Multiple API Groups", url: "#example-12-role-with-multiple-api-groups" },
              {title: "Example 13: ClusterRole for Non-Resource URLs", url: "#example-13-clusterrole-for-non-resource-urls" },
              {title: "Example 14: Role with All Verbs", url: "#example-14-role-with-all-verbs" },
              {title: "Example 15: Role with All Resources", url: "#example-15-role-with-all-resources" },
              {title: "Example 16: Binding Multiple Subjects", url: "#example-16-binding-multiple-subjects" },
              {title: "Example 17: Role for PersistentVolumeClaims", url: "#example-17-role-for-persistentvolumeclaims" },
              {title: "Example 18: Role for Secrets Management", url: "#example-18-role-for-secrets-management" },
              {title: "Example 19: ClusterRole for Namespace Operations", url: "#example-19-clusterrole-for-namespace-operations" },
              {title: "Example 20: Aggregated ClusterRole", url: "#example-20-aggregated-clusterrole" },
          ]},
          {title: "CLI Examples with Explanations", url: "#cli-examples-with-explanations", children: [
              {title: "Example 1: Create Basic Role", url: "#example-1-create-basic-role" },
              {title: "Example 2: Create RoleBinding for User", url: "#example-2-create-rolebinding-for-user" },
              {title: "Example 3: Create ClusterRole", url: "#example-3-create-clusterrole" },
              {title: "Example 4: Create ClusterRoleBinding", url: "#example-4-create-clusterrolebinding" },
              {title: "Example 5: Create Role with Multiple Resources", url: "#example-5-create-role-with-multiple-resources" },
              {title: "Example 6: Create Role with Specific Resource Names", url: "#example-6-create-role-with-specific-resource-names" },
              {title: "Example 7: Create Role for Subresources", url: "#example-7-create-role-for-subresources" },
              {title: "Example 8: Create ServiceAccount Binding", url: "#example-8-create-serviceaccount-binding" },
              {title: "Example 9: Test Permissions", url: "#example-9-test-permissions" },
              {title: "Example 10: Test Permissions as Different User", url: "#example-10-test-permissions-as-different-user" },
              {title: "Example 11: List All Permissions", url: "#example-11-list-all-permissions" },
              {title: "Example 12: Create Role for All Resources", url: "#example-12-create-role-for-all-resources" },
              {title: "Example 13: Create ClusterRole for Non-Resource URLs", url: "#example-13-create-clusterrole-for-non-resource-urls" },
              {title: "Example 14: Bind ClusterRole to Namespace", url: "#example-14-bind-clusterrole-to-namespace" },
              {title: "Example 15: Create Role with API Group", url: "#example-15-create-role-with-api-group" },
              {title: "Example 16: Check Cross-Namespace Permissions", url: "#example-16-check-cross-namespace-permissions" },
              {title: "Example 17: Create Role for Specific Verbs Only", url: "#example-17-create-role-for-specific-verbs-only" },
              {title: "Example 18: Update Role Rules", url: "#example-18-update-role-rules" },
              {title: "Example 19: Describe RBAC Resources", url: "#example-19-describe-rbac-resources" },
              {title: "Example 20: Delete RBAC Resources", url: "#example-20-delete-rbac-resources" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascripts/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../gotchas/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../gotchas/" class="btn btn-xs btn-link">
        RBAC Gotchas and Common Mistakes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../cani/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../cani/" class="btn btn-xs btn-link">
        Cani
      </a>
    </div>
    
  </div>

    

    <p>Here are 20 YAML examples with detailed explanations and 20 CLI examples with explanations, properly formatted.</p>
<h2 id="yaml-examples-with-explanations">YAML Examples with Explanations</h2>
<h3 id="example-1-basic-role-for-pod-reading">Example 1: Basic Role for Pod Reading</h3>
<p>This creates a Role that allows reading pods in the default namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pods&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;watch&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
The Role defines permissions but does not grant access. It specifies get, list, and watch verbs on pods in the core API group.</p>
<h3 id="example-2-rolebinding-for-user">Example 2: RoleBinding for User</h3>
<p>This binds the pod-reader Role to a user named alice.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader-binding</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">User</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
The RoleBinding grants alice the permissions defined in the pod-reader Role, but only in the default namespace.</p>
<h3 id="example-3-clusterrole-for-node-reading">Example 3: ClusterRole for Node Reading</h3>
<p>This creates a ClusterRole that allows reading nodes cluster-wide.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node-reader</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;nodes&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;watch&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
ClusterRoles exist at cluster scope and can reference cluster-scoped resources like nodes.</p>
<h3 id="example-4-clusterrolebinding-for-group">Example 4: ClusterRoleBinding for Group</h3>
<p>This grants node-reader permissions to all users in the monitoring group.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node-reader-binding</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Group</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node-reader</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
The binding is cluster-wide, so group members can read nodes in any namespace.</p>
<h3 id="example-5-role-with-multiple-resources">Example 5: Role with Multiple Resources</h3>
<p>This Role allows management of both pods and services.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">resource-manager</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pods&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;services&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;update&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;delete&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
A single Role can contain rules for multiple resources in the same API group.</p>
<h3 id="example-6-role-with-specific-resource-names">Example 6: Role with Specific Resource Names</h3>
<p>This Role allows access only to specific ConfigMaps by name.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config-reader</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;configmaps&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resourceNames</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;app-config&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;database-config&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
The resourceNames field restricts access to only those named resources, not all ConfigMaps.</p>
<h3 id="example-7-role-for-subresources">Example 7: Role for Subresources</h3>
<p>This Role allows accessing pod logs and execution.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-debugger</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pods/log&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;pods/exec&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Subresources like logs and exec require explicit permissions separate from the parent resource.</p>
<h3 id="example-8-serviceaccount-binding">Example 8: ServiceAccount Binding</h3>
<p>This binds a ServiceAccount to a Role in its namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sa-binding</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app-sa</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
ServiceAccounts must specify their namespace when referenced in bindings.</p>
<h3 id="example-9-cross-namespace-serviceaccount-access">Example 9: Cross-Namespace ServiceAccount Access</h3>
<p>This allows a ServiceAccount from monitoring namespace to read pods in default namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cross-ns-binding</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prometheus</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
ServiceAccounts can be granted permissions in namespaces other than where they exist.</p>
<h3 id="example-10-clusterrole-bound-to-namespace">Example 10: ClusterRole Bound to Namespace</h3>
<p>This uses a ClusterRole but limits it to a specific namespace via RoleBinding.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">limited-clusterrole</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">User</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tester</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
Even though admin is a ClusterRole, the RoleBinding limits its permissions to the staging namespace only.</p>
<h3 id="example-11-role-with-api-group-specific-resources">Example 11: Role with API Group Specific Resources</h3>
<p>This Role manages resources from the apps API group.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps-manager</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;apps&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;deployments&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;statefulsets&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;daemonsets&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;update&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;delete&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Different API groups require separate rules or comma-separated entries in the apiGroups array.</p>
<h3 id="example-12-role-with-multiple-api-groups">Example 12: Role with Multiple API Groups</h3>
<p>This Role covers resources from multiple API groups.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multi-group-role</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pods&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;services&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;apps&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;deployments&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Each distinct API group requires a separate rule entry in the rules array.</p>
<h3 id="example-13-clusterrole-for-non-resource-urls">Example 13: ClusterRole for Non-Resource URLs</h3>
<p>This ClusterRole allows access to health check endpoints.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">health-checker</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">nonResourceURLs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/healthz&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/readyz&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/livez&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Non-resource URLs represent API endpoints that aren't tied to specific resources.</p>
<h3 id="example-14-role-with-all-verbs">Example 14: Role with All Verbs</h3>
<p>This Role grants all actions on pods within a namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-admin</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pods&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
The asterisk wildcard grants all available verbs for the specified resource.</p>
<h3 id="example-15-role-with-all-resources">Example 15: Role with All Resources</h3>
<p>This Role grants read access to all resources in a namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">namespace-reader</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;watch&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Wildcards in both apiGroups and resources grant access across all API groups and resources.</p>
<h3 id="example-16-binding-multiple-subjects">Example 16: Binding Multiple Subjects</h3>
<p>This RoleBinding grants access to both a user and a ServiceAccount.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multi-subject-binding</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">subjects</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">User</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">developer</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">automation</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">roleRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-reader</span>
<span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</code></pre></div>
A single binding can reference multiple subjects of different kinds.</p>
<h3 id="example-17-role-for-persistentvolumeclaims">Example 17: Role for PersistentVolumeClaims</h3>
<p>This Role manages PersistentVolumeClaims in a namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvc-manager</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;persistentvolumeclaims&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;delete&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
PersistentVolumeClaims are namespaced resources in the core API group.</p>
<h3 id="example-18-role-for-secrets-management">Example 18: Role for Secrets Management</h3>
<p>This Role allows reading and creating secrets.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secret-manager</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;secrets&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Secret management requires explicit permissions as secrets are sensitive resources.</p>
<h3 id="example-19-clusterrole-for-namespace-operations">Example 19: ClusterRole for Namespace Operations</h3>
<p>This ClusterRole allows creating and listing namespaces.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">namespace-admin</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;namespaces&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">verbs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;create&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;get&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;list&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
Namespace operations require cluster-wide permissions since namespaces are cluster-scoped.</p>
<h3 id="example-20-aggregated-clusterrole">Example 20: Aggregated ClusterRole</h3>
<p>This ClusterRole uses aggregation to combine rules from other ClusterRoles.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring-aggregated</span>
<span class="nt">aggregationRule</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterRoleSelectors</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rbac.monitoring.io/aggregate-to-monitoring</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">rules</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</code></pre></div>
Aggregated ClusterRoles dynamically collect rules from other ClusterRoles with matching labels.</p>
<h2 id="cli-examples-with-explanations">CLI Examples with Explanations</h2>
<h3 id="example-1-create-basic-role">Example 1: Create Basic Role</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>pod-reader<span class="w"> </span>--verb<span class="o">=</span>get,list,watch<span class="w"> </span>--resource<span class="o">=</span>pods<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Creates a Role named pod-reader in the default namespace with read-only pod permissions.</p>
<h3 id="example-2-create-rolebinding-for-user">Example 2: Create RoleBinding for User</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>rolebinding<span class="w"> </span>pod-reader-binding<span class="w"> </span>--role<span class="o">=</span>pod-reader<span class="w"> </span>--user<span class="o">=</span>alice<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Binds the pod-reader Role to user alice in the default namespace.</p>
<h3 id="example-3-create-clusterrole">Example 3: Create ClusterRole</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>clusterrole<span class="w"> </span>node-reader<span class="w"> </span>--verb<span class="o">=</span>get,list,watch<span class="w"> </span>--resource<span class="o">=</span>nodes
</code></pre></div>
Creates a ClusterRole that allows reading nodes across the entire cluster.</p>
<h3 id="example-4-create-clusterrolebinding">Example 4: Create ClusterRoleBinding</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>clusterrolebinding<span class="w"> </span>node-reader-binding<span class="w"> </span>--clusterrole<span class="o">=</span>node-reader<span class="w"> </span>--group<span class="o">=</span>monitoring
</code></pre></div>
Grants node-reader permissions to all users in the monitoring group cluster-wide.</p>
<h3 id="example-5-create-role-with-multiple-resources">Example 5: Create Role with Multiple Resources</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>resource-manager<span class="w"> </span>--verb<span class="o">=</span>create,get,update,delete,list<span class="w"> </span>--resource<span class="o">=</span>pods,services<span class="w"> </span>--namespace<span class="o">=</span>production
</code></pre></div>
Creates a Role that manages both pods and services in the production namespace.</p>
<h3 id="example-6-create-role-with-specific-resource-names">Example 6: Create Role with Specific Resource Names</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>config-reader<span class="w"> </span>--verb<span class="o">=</span>get<span class="w"> </span>--resource<span class="o">=</span>configmaps<span class="w"> </span>--resource-name<span class="o">=</span>app-config,database-config<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Creates a Role that only allows accessing specific ConfigMaps by name.</p>
<h3 id="example-7-create-role-for-subresources">Example 7: Create Role for Subresources</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>pod-debugger<span class="w"> </span>--verb<span class="o">=</span>get,create<span class="w"> </span>--resource<span class="o">=</span>pods/log,pods/exec<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Creates a Role for accessing pod logs and exec subresources.</p>
<h3 id="example-8-create-serviceaccount-binding">Example 8: Create ServiceAccount Binding</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>rolebinding<span class="w"> </span>sa-binding<span class="w"> </span>--role<span class="o">=</span>pod-reader<span class="w"> </span>--serviceaccount<span class="o">=</span>default:my-app-sa<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Binds a ServiceAccount to a Role using the serviceaccount:namespace:name format.</p>
<h3 id="example-9-test-permissions">Example 9: Test Permissions</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span>create<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Checks if the current user has permission to create pods in the default namespace.</p>
<h3 id="example-10-test-permissions-as-different-user">Example 10: Test Permissions as Different User</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span>delete<span class="w"> </span>deployments<span class="w"> </span>--as<span class="o">=</span>system:serviceaccount:default:my-app-sa<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Tests permissions for a specific ServiceAccount rather than the current user.</p>
<h3 id="example-11-list-all-permissions">Example 11: List All Permissions</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span>--list<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Lists all permissions the current user has in the specified namespace.</p>
<h3 id="example-12-create-role-for-all-resources">Example 12: Create Role for All Resources</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>namespace-reader<span class="w"> </span>--verb<span class="o">=</span>get,list,watch<span class="w"> </span>--resource<span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Creates a Role with read access to all resources in the namespace.</p>
<h3 id="example-13-create-clusterrole-for-non-resource-urls">Example 13: Create ClusterRole for Non-Resource URLs</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>clusterrole<span class="w"> </span>health-checker<span class="w"> </span>--verb<span class="o">=</span>get<span class="w"> </span>--non-resource-url<span class="o">=</span>/healthz,/readyz,/livez
</code></pre></div>
Creates a ClusterRole for accessing health check endpoints.</p>
<h3 id="example-14-bind-clusterrole-to-namespace">Example 14: Bind ClusterRole to Namespace</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>rolebinding<span class="w"> </span>admin-in-staging<span class="w"> </span>--clusterrole<span class="o">=</span>admin<span class="w"> </span>--user<span class="o">=</span>admin<span class="w"> </span>--namespace<span class="o">=</span>staging
</code></pre></div>
Binds a ClusterRole to a user but limits it to a specific namespace via RoleBinding.</p>
<h3 id="example-15-create-role-with-api-group">Example 15: Create Role with API Group</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>deployment-manager<span class="w"> </span>--verb<span class="o">=</span>get,list,create,update,delete<span class="w"> </span>--resource<span class="o">=</span>deployments.apps<span class="w"> </span>--namespace<span class="o">=</span>production
</code></pre></div>
Specifies the API group (apps) for deployments resource.</p>
<h3 id="example-16-check-cross-namespace-permissions">Example 16: Check Cross-Namespace Permissions</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="o">=</span>production<span class="w"> </span>--as<span class="o">=</span>system:serviceaccount:monitoring:prometheus
</code></pre></div>
Checks if a ServiceAccount from one namespace has permissions in another namespace.</p>
<h3 id="example-17-create-role-for-specific-verbs-only">Example 17: Create Role for Specific Verbs Only</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>pod-lister<span class="w"> </span>--verb<span class="o">=</span>list<span class="w"> </span>--resource<span class="o">=</span>pods<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Creates a Role with only list permission, not get or watch.</p>
<h3 id="example-18-update-role-rules">Example 18: Update Role Rules</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>edit<span class="w"> </span>role<span class="w"> </span>pod-reader<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Opens the Role definition in an editor for modification.</p>
<h3 id="example-19-describe-rbac-resources">Example 19: Describe RBAC Resources</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>describe<span class="w"> </span>role<span class="w"> </span>pod-reader<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Shows detailed information about a Role including its rules.</p>
<h3 id="example-20-delete-rbac-resources">Example 20: Delete RBAC Resources</h3>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>rolebinding<span class="w"> </span>pod-reader-binding<span class="w"> </span>--namespace<span class="o">=</span>default
</code></pre></div>
Removes a RoleBinding, which revokes the permissions it was granting.</p>
<p>Each CLI command corresponds to creating, testing, or managing RBAC resources with specific parameters and options. The explanations detail what each command does and when to use it.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../gotchas/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../gotchas/" class="btn btn-xs btn-link">
        RBAC Gotchas and Common Mistakes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../cani/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../cani/" class="btn btn-xs btn-link">
        Cani
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>