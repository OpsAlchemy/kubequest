<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Vikash Kumar">
    <link rel="canonical" href="https://opsalchemy.github.io/kubequest/compose/08-gateway-api/gateway-api/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Kubernetes Gateway API - CKA Exam Mastery</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../stylesheets/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Kubernetes Gateway API", url: "#_top", children: [
              {title: "Core Architecture", url: "#core-architecture" },
              {title: "Complete YAML Examples (All Fields Explained)", url: "#complete-yaml-examples-all-fields-explained" },
              {title: "HTTPRoute - Complete with All Features", url: "#httproute-complete-with-all-features" },
              {title: "Other Route Types (Experimental)", url: "#other-route-types-experimental" },
              {title: "Supporting Resources", url: "#supporting-resources" },
              {title: "Testing Commands", url: "#testing-commands" },
              {title: "Key Concepts", url: "#key-concepts" },
              {title: "Infrastructure Labels", url: "#infrastructure-labels" },
              {title: "Available Controllers", url: "#available-controllers" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascripts/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../question/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../question/" class="btn btn-xs btn-link">
        Gateway API Practice Questions
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../07-crd%27s/solutions/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../07-crd%27s/solutions/" class="btn btn-xs btn-link">
        Solutions
      </a>
    </div>
    
  </div>

    

    <h1 id="kubernetes-gateway-api">Kubernetes Gateway API</h1>
<h2 id="core-architecture"><strong>Core Architecture</strong></h2>
<h3 id="three-tier-model"><strong>Three-Tier Model:</strong></h3>
<ol>
<li><strong>GatewayClass</strong> → Which controller implementation to use</li>
<li><strong>Gateway</strong> → Actual load balancer with listeners  </li>
<li><strong>HTTPRoute/TCPRoute/TLSRoute</strong> → Routing rules and logic</li>
</ol>
<h2 id="complete-yaml-examples-all-fields-explained"><strong>Complete YAML Examples (All Fields Explained)</strong></h2>
<h3 id="gatewayclass-all-possible-fields"><strong>GatewayClass - All Possible Fields:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GatewayClass</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># REQUIRED: Which controller implements this</span>
<span class="w">  </span><span class="nt">controllerName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;traefik.io/gateway-controller&quot;</span>

<span class="w">  </span><span class="c1"># OPTIONAL: Description</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Traefik</span><span class="nv"> </span><span class="s">GatewayClass</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">production&quot;</span>

<span class="w">  </span><span class="c1"># OPTIONAL: Controller-specific parameters</span>
<span class="w">  </span><span class="nt">parametersRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-config</span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GatewayClassConfig</span>
</code></pre></div>
<h3 id="gateway-complete-with-all-listeners"><strong>Gateway - Complete with All Listeners:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># REQUIRED: Which GatewayClass to use</span>
<span class="w">  </span><span class="nt">gatewayClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>

<span class="w">  </span><span class="c1"># REQUIRED: At least one listener</span>
<span class="w">  </span><span class="nt">listeners</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-public</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTP</span>

<span class="w">    </span><span class="c1"># OPTIONAL: Restrict hostnames</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.example-app.com&quot;</span>

<span class="w">    </span><span class="c1"># OPTIONAL: TLS (for HTTPS/TLS listeners only)</span>
<span class="w">    </span><span class="c1"># tls:</span>
<span class="w">    </span><span class="c1">#   mode: Terminate</span>
<span class="w">    </span><span class="c1">#   certificateRefs: []</span>

<span class="w">    </span><span class="c1"># OPTIONAL: Which namespaces can attach routes</span>
<span class="w">    </span><span class="nt">allowedRoutes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespaces</span><span class="p">:</span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Same</span><span class="w">  </span><span class="c1"># Same, All, or Selector</span>
<span class="w">        </span><span class="c1"># selector:  # When from: Selector</span>
<span class="w">        </span><span class="c1">#   matchLabels:</span>
<span class="w">        </span><span class="c1">#     shared-gateway: &quot;true&quot;</span>

<span class="w">  </span><span class="c1"># HTTPS Listener Example  </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https-secure</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPS</span>

<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example-app.com&quot;</span>

<span class="w">    </span><span class="c1"># REQUIRED for HTTPS: TLS configuration</span>
<span class="w">    </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Terminate</span><span class="w">  </span><span class="c1"># or Passthrough</span>
<span class="w">      </span><span class="nt">certificateRefs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secret-tls</span>
<span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="c1"># options:  # Optional TLS options</span>
<span class="w">      </span><span class="c1">#   cipherSuites: []</span>
<span class="w">      </span><span class="c1">#   minVersion: &quot;TLSv1.2&quot;</span>

<span class="w">    </span><span class="nt">allowedRoutes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespaces</span><span class="p">:</span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">All</span>

<span class="w">  </span><span class="c1"># TCP Listener Example (Experimental)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp-database</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>

<span class="w">    </span><span class="nt">allowedRoutes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespaces</span><span class="p">:</span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Same</span>
</code></pre></div>
<p><strong>Listener Protocol Types:</strong>
- <code>HTTP</code> → For HTTPRoute
- <code>HTTPS</code> → For HTTPRoute with TLS
- <code>TLS</code> → For TLSRoute (passthrough)<br />
- <code>TCP</code> → For TCPRoute
- <code>UDP</code> → For UDPRoute (experimental)</p>
<p><strong>TLS Modes:</strong>
- <code>Terminate</code> → TLS ends at Gateway (decrypts)
- <code>Passthrough</code> → TLS continues to backend</p>
<h2 id="httproute-complete-with-all-features"><strong>HTTPRoute - Complete with All Features</strong></h2>
<h3 id="route-by-hostname-from-readme"><strong>Route by Hostname (From README):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># REQUIRED: Attach to which Gateway</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">    </span><span class="c1"># namespace: default  # If Gateway in different namespace</span>
<span class="w">    </span><span class="c1"># sectionName: web    # Target specific listener</span>
<span class="w">    </span><span class="c1"># port: 80           # Target specific port</span>

<span class="w">  </span><span class="c1"># OPTIONAL: Which hostnames to match</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app-go.com&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*.test.example-app-go.com&quot;</span><span class="w">  </span><span class="c1"># Wildcard subdomains</span>

<span class="w">  </span><span class="c1"># REQUIRED: At least one rule</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Path matching (choose one type)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span><span class="w">  </span><span class="c1"># Exact, PathPrefix, or RegularExpression</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="w">    </span><span class="c1"># OPTIONAL: Header matching</span>
<span class="w">    </span><span class="c1"># headers:</span>
<span class="w">    </span><span class="c1"># - type: Exact  # or RegularExpression</span>
<span class="w">    </span><span class="c1">#   name: &quot;X-API-Version&quot;</span>
<span class="w">    </span><span class="c1">#   value: &quot;v2&quot;</span>

<span class="w">    </span><span class="c1"># OPTIONAL: Query parameter matching  </span>
<span class="w">    </span><span class="c1"># queryParams:</span>
<span class="w">    </span><span class="c1"># - type: Exact</span>
<span class="w">    </span><span class="c1">#   name: &quot;debug&quot;</span>
<span class="w">    </span><span class="c1">#   value: &quot;true&quot;</span>

<span class="w">    </span><span class="c1"># OPTIONAL: HTTP method matching</span>
<span class="w">    </span><span class="c1"># method: &quot;GET&quot;  # GET, POST, PUT, DELETE, etc.</span>

<span class="w">    </span><span class="c1"># OPTIONAL: Request filters (applied in order)</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># - type: RequestHeaderModifier</span>
<span class="w">    </span><span class="c1">#   requestHeaderModifier:</span>
<span class="w">    </span><span class="c1">#     set:    # Overwrite if exists</span>
<span class="w">    </span><span class="c1">#     - name: &quot;X-Request-ID&quot;</span>
<span class="w">    </span><span class="c1">#       value: &quot;{{uuid}}&quot;</span>
<span class="w">    </span><span class="c1">#     add:    # Add if not exists</span>
<span class="w">    </span><span class="c1">#     - name: &quot;X-Forwarded-For&quot;</span>
<span class="w">    </span><span class="c1">#       value: &quot;$remote_addr&quot;</span>
<span class="w">    </span><span class="c1">#     remove: # Remove headers</span>
<span class="w">    </span><span class="c1">#     - &quot;X-Secret-Header&quot;</span>

<span class="w">    </span><span class="c1"># - type: ResponseHeaderModifier</span>
<span class="w">    </span><span class="c1">#   responseHeaderModifier:</span>
<span class="w">    </span><span class="c1">#     add:</span>
<span class="w">    </span><span class="c1">#     - name: &quot;Cache-Control&quot;</span>
<span class="w">    </span><span class="c1">#       value: &quot;max-age=3600&quot;</span>

<span class="w">    </span><span class="c1"># - type: RequestRedirect</span>
<span class="w">    </span><span class="c1">#   requestRedirect:</span>
<span class="w">    </span><span class="c1">#     scheme: &quot;https&quot;</span>
<span class="w">    </span><span class="c1">#     hostname: &quot;secure.example.com&quot;</span>
<span class="w">    </span><span class="c1">#     port: 443</span>
<span class="w">    </span><span class="c1">#     statusCode: 301</span>

<span class="w">    </span><span class="c1"># - type: URLRewrite</span>
<span class="w">    </span><span class="c1">#   urlRewrite:</span>
<span class="w">    </span><span class="c1">#     path:</span>
<span class="w">    </span><span class="c1">#       type: ReplacePrefixMatch  # or ReplaceFullPath</span>
<span class="w">    </span><span class="c1">#       replacePrefixMatch: &quot;/v2&quot;</span>

<span class="w">    </span><span class="c1"># - type: RequestMirror</span>
<span class="w">    </span><span class="c1">#   requestMirror:</span>
<span class="w">    </span><span class="c1">#     backendRef:</span>
<span class="w">    </span><span class="c1">#       name: audit-service</span>
<span class="w">    </span><span class="c1">#       port: 8080</span>

<span class="w">    </span><span class="c1"># - type: ExtensionRef</span>
<span class="w">    </span><span class="c1">#   extensionRef:</span>
<span class="w">    </span><span class="c1">#     name: custom-filter</span>
<span class="w">    </span><span class="c1">#     kind: CustomFilter</span>
<span class="w">    </span><span class="c1">#     group: example.com</span>

<span class="w">    </span><span class="c1"># REQUIRED: Where to send traffic</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">      </span><span class="c1"># weight: 100  # For traffic splitting (0-100)</span>
<span class="w">      </span><span class="c1"># filters: []  # Backend-specific filters</span>

<span class="w">    </span><span class="c1"># Multiple backends for traffic splitting</span>
<span class="w">    </span><span class="c1"># - name: go-svc-v2</span>
<span class="w">    </span><span class="c1">#   port: 5000</span>
<span class="w">    </span><span class="c1">#   weight: 20</span>
</code></pre></div>
<h3 id="route-by-path-exact-match"><strong>Route by Path - Exact Match:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-exact</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app-python.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span><span class="w">  </span><span class="c1"># Only &quot;/&quot; matches</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<h3 id="route-by-path-prefix-match"><strong>Route by Path - Prefix Match:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-prefix</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app-python.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span><span class="w">  </span><span class="c1"># &quot;/&quot;, &quot;/api&quot;, &quot;/api/users&quot; all match</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<h3 id="url-rewrite-pattern-api-gateway"><strong>URL Rewrite Pattern (API Gateway):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-gateway</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Python service</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/python&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>

<span class="w">  </span><span class="c1"># Go service</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/go&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<p><strong>URL Rewrite Types:</strong>
- <code>ReplacePrefixMatch</code> → Replace matched prefix only
- <code>ReplaceFullPath</code> → Replace entire path</p>
<h3 id="header-modification-cors-example"><strong>Header Modification (CORS Example):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-cors</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/go&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ResponseHeaderModifier</span>
<span class="w">      </span><span class="nt">responseHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">add</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Allow-Origin&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Allow-Methods&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Allow-Headers&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<h3 id="httpstls-configuration"><strong>HTTPS/TLS Configuration:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Updated Gateway with TLS</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">gatewayClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">listeners</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTP</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.example-app.com&quot;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-secure</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPS</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.example-app.com&quot;</span>
<span class="w">    </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Terminate</span>
<span class="w">      </span><span class="nt">certificateRefs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secret-tls</span>

<span class="c1"># HTTPRoute targeting TLS listener</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-tls</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">    </span><span class="nt">sectionName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-secure</span><span class="w">  </span><span class="c1"># Target HTTPS listener</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;example-app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/go&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-svc</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<h2 id="other-route-types-experimental"><strong>Other Route Types (Experimental)</strong></h2>
<h3 id="tcproute"><strong>TCPRoute:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1alpha2</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-route</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
</code></pre></div>
<h3 id="tlsroute"><strong>TLSRoute:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1alpha2</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TLSRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-passthrough</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;secure.example-app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8443</span>
</code></pre></div>
<h2 id="supporting-resources"><strong>Supporting Resources</strong></h2>
<h3 id="tls-secret"><strong>TLS Secret:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secret-tls</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/tls</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tls.crt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BASE64_ENCODED_CERT</span>
<span class="w">  </span><span class="nt">tls.key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BASE64_ENCODED_KEY</span>
</code></pre></div>
<h3 id="referencegrant-cross-namespace"><strong>ReferenceGrant (Cross-Namespace):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReferenceGrant</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-routes</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">from</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-namespace</span>

<span class="w">  </span><span class="nt">to</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shared-gateway</span>
</code></pre></div>
<h2 id="testing-commands"><strong>Testing Commands</strong></h2>
<h3 id="local-testing-with-kind"><strong>Local Testing with kind:</strong></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Update /etc/hosts</span>
<span class="m">127</span>.0.0.1<span class="w"> </span>example-app.com
<span class="m">127</span>.0.0.1<span class="w"> </span>example-app-go.com
<span class="m">127</span>.0.0.1<span class="w"> </span>example-app-python.com

<span class="c1"># Port forward</span>
kubectl<span class="w"> </span>-n<span class="w"> </span>traefik<span class="w"> </span>port-forward<span class="w"> </span>svc/traefik<span class="w"> </span><span class="m">80</span>
kubectl<span class="w"> </span>-n<span class="w"> </span>traefik<span class="w"> </span>port-forward<span class="w"> </span>svc/traefik<span class="w"> </span><span class="m">443</span>

<span class="c1"># Test HTTP</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: example-app-go.com&quot;</span><span class="w"> </span>http://localhost
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: example-app-python.com&quot;</span><span class="w"> </span>http://localhost
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: example-app.com&quot;</span><span class="w"> </span>http://localhost/api/go

<span class="c1"># Test HTTPS</span>
curl<span class="w"> </span>-k<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: example-app.com&quot;</span><span class="w"> </span>https://localhost:443/api/go
</code></pre></div>
<h2 id="key-concepts"><strong>Key Concepts</strong></h2>
<h3 id="traffic-flow"><strong>Traffic Flow:</strong></h3>
<div class="highlight"><pre><span></span><code>Request → Gateway (listener) → HTTPRoute (match) → Filters → Backend Service
</code></pre></div>
<h3 id="required-fields"><strong>Required Fields:</strong></h3>
<ul>
<li><strong>GatewayClass</strong>: <code>controllerName</code></li>
<li><strong>Gateway</strong>: <code>gatewayClassName</code>, <code>listeners</code> (with <code>name</code>, <code>port</code>, <code>protocol</code>)</li>
<li><strong>HTTPRoute</strong>: <code>parentRefs</code>, <code>rules</code> (with <code>backendRefs</code>)</li>
</ul>
<h3 id="optional-but-important"><strong>Optional But Important:</strong></h3>
<ul>
<li><code>hostnames</code> → Virtual hosting</li>
<li><code>tls</code> → HTTPS/TLS</li>
<li><code>allowedRoutes</code> → Security boundaries</li>
<li><code>filters</code> → Transformations</li>
<li><code>sectionName</code> → Target specific listener</li>
</ul>
<h3 id="path-matching-types"><strong>Path Matching Types:</strong></h3>
<ul>
<li><code>Exact</code> → Only exact path</li>
<li><code>PathPrefix</code> → Path and everything under it</li>
<li><code>RegularExpression</code> → Regex pattern</li>
</ul>
<h3 id="filter-types"><strong>Filter Types:</strong></h3>
<ol>
<li><code>RequestHeaderModifier</code> → Modify request headers</li>
<li><code>ResponseHeaderModifier</code> → Modify response headers</li>
<li><code>URLRewrite</code> → Rewrite URL path</li>
<li><code>RequestRedirect</code> → Redirect to different URL</li>
<li><code>RequestMirror</code> → Mirror traffic</li>
<li><code>ExtensionRef</code> → Custom filters</li>
</ol>
<h2 id="infrastructure-labels"><strong>Infrastructure Labels</strong></h2>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud-gateway</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gateway.networking.k8s.io/infrastructure</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws-nlb&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;production&quot;</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">service.beta.kubernetes.io/aws-load-balancer-type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nlb&quot;</span>
<span class="w">    </span><span class="nt">service.beta.kubernetes.io/aws-load-balancer-scheme</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;internet-facing&quot;</span>
</code></pre></div>
<p><strong>Purpose:</strong> Propagate labels/annotations to cloud infrastructure.</p>
<h2 id="available-controllers"><strong>Available Controllers</strong></h2>
<ul>
<li><strong>Traefik</strong> → Used in README, simple setup</li>
<li><strong>Envoy</strong> → High-performance proxy</li>
<li><strong>Istio</strong> → Service mesh integration</li>
<li><strong>NGINX Fabric</strong> → NGINX-based implementation</li>
</ul>
<hr />

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../question/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../question/" class="btn btn-xs btn-link">
        Gateway API Practice Questions
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../07-crd%27s/solutions/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../07-crd%27s/solutions/" class="btn btn-xs btn-link">
        Solutions
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>