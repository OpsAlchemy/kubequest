<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Vikash Kumar">
    <link rel="canonical" href="https://opsalchemy.github.io/kubequest/compose/12-deployments/_questions/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>DaemonSets - CKA Exam Mastery</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../stylesheets/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "DaemonSets", url: "#_top", children: [
              {title: "Question 1", url: "#question-1" },
              {title: "Question 2", url: "#question-2" },
              {title: "Question 3", url: "#question-3" },
              {title: "Question 4", url: "#question-4" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascripts/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../a-daemonsets/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../a-daemonsets/" class="btn btn-xs btn-link">
        DaemonSet
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../11-coredns/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../11-coredns/" class="btn btn-xs btn-link">
        Index
      </a>
    </div>
    
  </div>

    

    <h1 id="daemonsets">DaemonSets</h1>
<h2 id="question-1">Question 1</h2>
<p><strong>Namespace:</strong> <code>ops</code><br />
<strong>Name:</strong> <code>node-config-writer</code><br />
<strong>Image:</strong> <code>busybox:1.36</code><br />
<strong>Command:</strong> <code>sh -c "echo $NODE_NAME &gt; /host/node.txt &amp;&amp; sleep 3600"</code>  </p>
<h3 id="specifications">Specifications</h3>
<p><strong>Nodes:</strong>
- All worker nodes</p>
<p><strong>Environment Variables:</strong>
- <code>NODE_NAME</code> from Downward API</p>
<p><strong>Volumes:</strong>
- HostPath: <code>/etc/node-info</code>
- Mount path: <code>/host</code></p>
<p><strong>Scheduling:</strong>
- One Pod per node</p>
<h3 id="task">Task</h3>
<p>Create a DaemonSet that writes the node name to a file on each worker node.</p>
<hr />
<h2 id="question-2">Question 2</h2>
<p><strong>Namespace:</strong> <code>infra</code><br />
<strong>Name:</strong> <code>zone-aware-daemon</code><br />
<strong>Image:</strong> <code>busybox:1.36</code><br />
<strong>Command:</strong> <code>printenv ZONE &amp;&amp; sleep 3600</code>  </p>
<h3 id="specifications_1">Specifications</h3>
<p><strong>Nodes:</strong>
- Only nodes with label <code>topology.kubernetes.io/zone</code></p>
<p><strong>Environment Variables:</strong>
- Set <code>ZONE</code> environment variable from the node label <code>topology.kubernetes.io/zone</code> using Downward API</p>
<p><strong>Scheduling:</strong>
- One Pod per eligible node</p>
<h3 id="task_1">Task</h3>
<p>Create a DaemonSet that reads a node label and exposes it as an environment variable inside the Pod. Use nodeAffinity to schedule only on nodes that have the <code>topology.kubernetes.io/zone</code> label.</p>
<hr />
<h2 id="question-3">Question 3</h2>
<p><strong>Namespace:</strong> <code>monitoring</code><br />
<strong>Name:</strong> <code>log-collector</code><br />
<strong>Image:</strong> <code>busybox:1.36</code><br />
<strong>Command:</strong> <code>sh -c "while true; do echo '[SYSTEM] Node: '$HOSTNAME' - Memory: $(free -m | grep Mem | awk '{print $3}')MB' &gt;&gt; /var/log/node-metrics.log; sleep 30; done"</code>  </p>
<h3 id="specifications_2">Specifications</h3>
<p><strong>Nodes:</strong>
- All nodes</p>
<p><strong>Environment Variables:</strong>
- <code>HOSTNAME</code> from Downward API (pod.spec.nodeName)</p>
<p><strong>Volumes:</strong>
- HostPath: <code>/var/log</code>
- Mount path: <code>/var/log</code>
- Type: DirectoryOrCreate</p>
<p><strong>Resources:</strong>
- Requests: CPU 100m, Memory 64Mi
- Limits: CPU 200m, Memory 128Mi</p>
<p><strong>Scheduling:</strong>
- One Pod per node
- Tolerate all taints</p>
<h3 id="task_2">Task</h3>
<p>Create a DaemonSet that collects and logs node metrics to a shared log file on each node. The Pod should be able to run on all nodes including master nodes by using tolerations.</p>
<hr />
<h2 id="question-4">Question 4</h2>
<p><strong>Namespace:</strong> <code>system</code><br />
<strong>Name:</strong> <code>network-monitor</code><br />
<strong>Image:</strong> <code>busybox:1.36</code><br />
<strong>Command:</strong> <code>sh -c "while true; do echo '[TIMESTAMP]' $(date '+%Y-%m-%d %H:%M:%S') '[INTERFACE] eth0:' $(ip addr show eth0 | grep 'inet ' | awk '{print $2}') '[GATEWAY]' $(ip route | grep default | awk '{print $3}') &gt;&gt; /var/log/network-info.log; sleep 60; done"</code>  </p>
<h3 id="specifications_3">Specifications</h3>
<p><strong>Nodes:</strong>
- All nodes</p>
<p><strong>Environment Variables:</strong>
- <code>NODE_IP</code> from pod.status.podIP</p>
<p><strong>Volumes:</strong>
- HostPath: <code>/var/log</code>
- Mount path: <code>/var/log</code>
- Type: DirectoryOrCreate</p>
<p><strong>Init Container:</strong>
- Image: busybox:1.36
- Command: Create <code>/var/log/network-info.log</code> if it doesn't exist</p>
<p><strong>Resources:</strong>
- Requests: CPU 50m, Memory 32Mi
- Limits: CPU 100m, Memory 64Mi</p>
<p><strong>Scheduling:</strong>
- One Pod per node
- Skip control-plane nodes (use nodeSelector or taints/tolerations)</p>
<h3 id="task_3">Task</h3>
<p>Create a DaemonSet that monitors network information on each worker node and logs it periodically. Use an init container to ensure the log file exists, and verify that Pods do NOT run on control-plane nodes.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../a-daemonsets/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../a-daemonsets/" class="btn btn-xs btn-link">
        DaemonSet
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../11-coredns/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../11-coredns/" class="btn btn-xs btn-link">
        Index
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>