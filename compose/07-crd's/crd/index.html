<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Vikash Kumar">
    <link rel="canonical" href="https://opsalchemy.github.io/kubequest/compose/07-crd%27s/crd/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Custom Resource Definitions (CRDs) and Custom Resources (CRs) - CKA Exam Mastery</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../stylesheets/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Custom Resource Definitions (CRDs) and Custom Resources (CRs)", url: "#_top", children: [
              {title: "What CRDs and CRs are", url: "#what-crds-and-crs-are" },
              {title: "Core identity of any Kubernetes resource", url: "#core-identity-of-any-kubernetes-resource" },
              {title: "Minimal CRD structure (exam-ready, v1)", url: "#minimal-crd-structure-exam-ready-v1" },
              {title: "Meaning of CRD fields", url: "#meaning-of-crd-fields" },
              {title: "served and storage (exam-critical)", url: "#served-and-storage-exam-critical" },
              {title: "Namespaced vs Cluster scope", url: "#namespaced-vs-cluster-scope" },
              {title: "Example 1: Namespaced CRD (Backup)", url: "#example-1-namespaced-crd-backup" },
              {title: "Example 2: Cluster-scoped CRD (MaintenanceWindow)", url: "#example-2-cluster-scoped-crd-maintenancewindow" },
              {title: "apiVersion: ops.example.com/v1 kind: MaintenanceWindow metadata: name: example-maintenancewindow", url: "#apiversion-opsexamplecomv1-kind-maintenancewindow-metadata-name-example-maintenancewindow" },
              {title: "Example 3: Namespaced CRD with operational intent (ScheduledBackup)", url: "#example-3-namespaced-crd-with-operational-intent-scheduledbackup" },
              {title: "apiVersion: storage.example.com/v1 kind: ScheduledBackup metadata: name: daily-backup namespace: default spec: schedule: \u0026quot;0 2 * * *\u0026quot; retention: days: 7", url: "#apiversion-storageexamplecomv1-kind-scheduledbackup-metadata-name-daily-backup-namespace-default-spec-schedule-0-2-retention-days-7" },
              {title: "Adding shortcuts with shortNames", url: "#adding-shortcuts-with-shortnames" },
              {title: "Creating Custom Resources (CRs)", url: "#creating-custom-resources-crs" },
              {title: "Listing, describing, deleting CRs", url: "#listing-describing-deleting-crs" },
              {title: "Order of operations (exam critical)", url: "#order-of-operations-exam-critical" },
              {title: "kubectl mental model", url: "#kubectl-mental-model" },
              {title: "Common CKA mistakes", url: "#common-cka-mistakes" },
              {title: "Final exam checklist", url: "#final-exam-checklist" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascripts/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../question/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../question/" class="btn btn-xs btn-link">
        Question
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../06-cluster-certificates-and-kube-system%20%5Bimportant%5D/kubeadm-certs/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../06-cluster-certificates-and-kube-system%20%5Bimportant%5D/kubeadm-certs/" class="btn btn-xs btn-link">
        kubeadm Certificate Checks &amp; Renewal
      </a>
    </div>
    
  </div>

    

    <h1 id="custom-resource-definitions-crds-and-custom-resources-crs">Custom Resource Definitions (CRDs) and Custom Resources (CRs)</h1>
<hr />
<h2 id="what-crds-and-crs-are">What CRDs and CRs are</h2>
<ul>
<li><strong>CustomResourceDefinition (CRD)</strong> extends the Kubernetes API by defining a new resource type</li>
<li><strong>Custom Resource (CR)</strong> is an instance of that resource type</li>
<li>CRDs are created <strong>once</strong></li>
<li>CRs are created <strong>many times</strong></li>
<li>A CR <strong>cannot exist</strong> unless its CRD already exists</li>
<li>CRDs are always <strong>cluster-scoped</strong></li>
<li>CRs can be <strong>namespaced or cluster-scoped</strong>, depending on the CRD</li>
</ul>
<p>Analogy:</p>
<ul>
<li>Deployment API → Deployment objects</li>
<li>CRD → Custom API</li>
<li>CR → Objects using that API</li>
</ul>
<hr />
<h2 id="core-identity-of-any-kubernetes-resource">Core identity of any Kubernetes resource</h2>
<p>Every Kubernetes resource is uniquely identified by:</p>
<div class="highlight"><pre><span></span><code>group + version + kind
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.com/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Backup</span>
</code></pre></div>
<hr />
<h2 id="minimal-crd-structure-exam-ready-v1">Minimal CRD structure (exam-ready, v1)</h2>
<blockquote>
<p>With <code>apiextensions.k8s.io/v1</code>, a schema is <strong>mandatory</strong>.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiextensions.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomResourceDefinition</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;plural&gt;.&lt;group&gt;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;group&gt;</span>
<span class="w">  </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespaced | Cluster</span>
<span class="w">  </span><span class="nt">names</span><span class="p">:</span>
<span class="w">    </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;plural&gt;</span>
<span class="w">    </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;singular&gt;</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;Kind&gt;</span>
<span class="w">  </span><span class="nt">versions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">        </span><span class="nt">openAPIV3Schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</code></pre></div>
<p>Critical rules:</p>
<div class="highlight"><pre><span></span><code>metadata.name = plural.group
Exactly one version must have storage: true
At least one version must have served: true
</code></pre></div>
<hr />
<h2 id="meaning-of-crd-fields">Meaning of CRD fields</h2>
<ol>
<li><strong>group</strong></li>
<li>Logical API grouping</li>
<li>
<p>Used in CRD and CR <code>apiVersion</code></p>
</li>
<li>
<p><strong>version</strong></p>
</li>
<li>API version</li>
<li>
<p>Appears after <code>/</code> in <code>apiVersion</code></p>
</li>
<li>
<p><strong>kind</strong></p>
</li>
<li>Singular, capitalized resource name</li>
<li>
<p>Used in CR YAML</p>
</li>
<li>
<p><strong>plural</strong></p>
</li>
<li>
<p>Used in <code>kubectl</code> commands</p>
</li>
<li>
<p><strong>singular</strong></p>
</li>
<li>
<p>Optional <code>kubectl</code> usage</p>
</li>
<li>
<p><strong>scope</strong></p>
</li>
<li>Determines whether CRs are namespaced or cluster-scoped</li>
</ol>
<hr />
<h2 id="served-and-storage-exam-critical"><code>served</code> and <code>storage</code> (exam-critical)</h2>
<h3 id="served">served</h3>
<div class="highlight"><pre><span></span><code><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<ul>
<li>Determines whether this version is accessible via the API</li>
<li>If <code>false</code>, users <strong>cannot</strong> create or read CRs using this version</li>
</ul>
<p>Mental model:</p>
<div class="highlight"><pre><span></span><code>served = can users use this version?
</code></pre></div>
<hr />
<h3 id="storage">storage</h3>
<div class="highlight"><pre><span></span><code><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<ul>
<li>Determines which version is used to store objects in <strong>etcd</strong></li>
<li>Exactly <strong>one</strong> version must be <code>storage: true</code></li>
<li>Other served versions are automatically converted to this version</li>
</ul>
<p>Mental model:</p>
<div class="highlight"><pre><span></span><code>storage = how Kubernetes stores the object internally
</code></pre></div>
<hr />
<h2 id="namespaced-vs-cluster-scope">Namespaced vs Cluster scope</h2>
<h3 id="namespaced-crd">Namespaced CRD</h3>
<ul>
<li>CR must include <code>metadata.namespace</code></li>
<li>kubectl supports <code>-n</code> and <code>-A</code></li>
</ul>
<p>Example CR:</p>
<div class="highlight"><pre><span></span><code><span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily-backup</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
<p>Commands:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>backups<span class="w"> </span>-n<span class="w"> </span>default
kubectl<span class="w"> </span>get<span class="w"> </span>backups<span class="w"> </span>-A
</code></pre></div>
<hr />
<h3 id="cluster-scoped-crd">Cluster-scoped CRD</h3>
<ul>
<li>CR must NOT include <code>metadata.namespace</code></li>
<li>kubectl does NOT support <code>-n</code> or <code>-A</code></li>
</ul>
<p>Example CR:</p>
<div class="highlight"><pre><span></span><code><span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sunday-window</span>
</code></pre></div>
<hr />
<h2 id="example-1-namespaced-crd-backup">Example 1: Namespaced CRD (Backup)</h2>
<h3 id="customresourcedefinition">CustomResourceDefinition</h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiextensions.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomResourceDefinition</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backups.storage.example.com</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.com</span>
<span class="w">  </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespaced</span>
<span class="w">  </span><span class="nt">names</span><span class="p">:</span>
<span class="w">    </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backups</span>
<span class="w">    </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Backup</span>
<span class="w">  </span><span class="nt">versions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">        </span><span class="nt">openAPIV3Schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</code></pre></div>
<p>Create and verify:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>backup-crd.yaml
kubectl<span class="w"> </span>get<span class="w"> </span>crd<span class="w"> </span>backups.storage.example.com
</code></pre></div>
<hr />
<p>Custom Resource</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.com/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Backup</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily-backup</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
<hr />
<h2 id="example-2-cluster-scoped-crd-maintenancewindow">Example 2: Cluster-scoped CRD (MaintenanceWindow)</h2>
<h3 id="customresourcedefinition_1">CustomResourceDefinition</h3>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiextensions.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomResourceDefinition</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">maintenancewindows.ops.example.com</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ops.example.com</span>
<span class="w">  </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="w">  </span><span class="nt">names</span><span class="p">:</span>
<span class="w">    </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">maintenancewindows</span>
<span class="w">    </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">maintenancewindow</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MaintenanceWindow</span>
<span class="w">  </span><span class="nt">versions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">        </span><span class="nt">openAPIV3Schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</code></pre></div>
Custom Resource</p>
<h2 id="apiversion-opsexamplecomv1-kind-maintenancewindow-metadata-name-example-maintenancewindow"><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ops.example.com/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MaintenanceWindow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-maintenancewindow</span>
</code></pre></div></h2>
<h2 id="example-3-namespaced-crd-with-operational-intent-scheduledbackup">Example 3: Namespaced CRD with operational intent (ScheduledBackup)</h2>
<p>This example models scheduled backups with retention and demonstrates validation.</p>
<h3 id="customresourcedefinition_2">CustomResourceDefinition</h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiextensions.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomResourceDefinition</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scheduledbackups.storage.example.com</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.com</span>
<span class="w">  </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespaced</span>
<span class="w">  </span><span class="nt">names</span><span class="p">:</span>
<span class="w">    </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scheduledbackups</span>
<span class="w">    </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scheduledbackup</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ScheduledBackup</span>
<span class="w">  </span><span class="nt">versions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">      </span><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">        </span><span class="nt">openAPIV3Schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">          </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">              </span><span class="nt">required</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">schedule</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retention</span>
<span class="w">              </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">                </span><span class="nt">schedule</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                </span><span class="nt">retention</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">                  </span><span class="nt">required</span><span class="p">:</span>
<span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">days</span>
<span class="w">                  </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">days</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">                      </span><span class="nt">minimum</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div>
<p>Custom Resource</p>
<h2 id="apiversion-storageexamplecomv1-kind-scheduledbackup-metadata-name-daily-backup-namespace-default-spec-schedule-0-2-retention-days-7"><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.com/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ScheduledBackup</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily-backup</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schedule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="w">  </span><span class="nt">retention</span><span class="p">:</span>
<span class="w">    </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
</code></pre></div></h2>
<h2 id="adding-shortcuts-with-shortnames">Adding shortcuts with <code>shortNames</code></h2>
<p>Shortcuts make kubectl usage faster.</p>
<h3 id="how-to-add">How to add</h3>
<p>CR
<div class="highlight"><pre><span></span><code><span class="nt">names</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">featuretoggles</span>
<span class="w">  </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">featuretoggle</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FeatureToggle</span>
<span class="w">  </span><span class="nt">shortNames</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ft</span>
</code></pre></div></p>
<h3 id="usage">Usage</h3>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>ft
kubectl<span class="w"> </span>describe<span class="w"> </span>ft<span class="w"> </span>generic<span class="w"> </span>-n<span class="w"> </span>default
kubectl<span class="w"> </span>delete<span class="w"> </span>ft<span class="w"> </span>generic<span class="w"> </span>-n<span class="w"> </span>default
</code></pre></div>
<p>Short names are:</p>
<ul>
<li>Defined <strong>only in the CRD</strong></li>
<li>Optional</li>
<li>Very useful in the exam</li>
</ul>
<hr />
<h2 id="creating-custom-resources-crs">Creating Custom Resources (CRs)</h2>
<p>Rules:</p>
<ul>
<li>CRD must exist first</li>
<li>CR <code>apiVersion</code> must match CRD group/version</li>
<li>CR <code>kind</code> must match CRD kind exactly</li>
<li>Namespace must match scope</li>
</ul>
<p>Command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>cr.yaml
</code></pre></div>
<hr />
<h2 id="listing-describing-deleting-crs">Listing, describing, deleting CRs</h2>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>&lt;plural&gt;
kubectl<span class="w"> </span>describe<span class="w"> </span>&lt;singular&gt;<span class="w"> </span>&lt;name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
kubectl<span class="w"> </span>delete<span class="w"> </span>&lt;singular&gt;<span class="w"> </span>&lt;name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
</code></pre></div>
<hr />
<h2 id="order-of-operations-exam-critical">Order of operations (exam critical)</h2>
<p>Correct:</p>
<ol>
<li>Create CRD</li>
<li>Verify CRD exists</li>
<li>Create CR</li>
</ol>
<p>Incorrect:</p>
<ul>
<li>Creating CR before CRD</li>
</ul>
<p>Error:</p>
<div class="highlight"><pre><span></span><code>no matches for kind &quot;&lt;Kind&gt;&quot; in version &quot;&lt;group&gt;/&lt;version&gt;&quot;
</code></pre></div>
<hr />
<h2 id="kubectl-mental-model">kubectl mental model</h2>
<ul>
<li><code>kubectl get</code> → <strong>plural</strong></li>
<li>YAML <code>kind</code> → <strong>Kind</strong></li>
<li>YAML <code>apiVersion</code> → <strong>group/version</strong></li>
<li>CRD name → <strong>plural.group</strong></li>
</ul>
<hr />
<h2 id="common-cka-mistakes">Common CKA mistakes</h2>
<ul>
<li>Missing schema in v1 CRDs</li>
<li>Wrong CRD name (not plural.group)</li>
<li>apiVersion mismatch in CR</li>
<li>Namespace used on cluster-scoped CR</li>
<li>Missing namespace on namespaced CR</li>
<li>Using singular with <code>kubectl get</code></li>
<li>Creating CR before CRD</li>
</ul>
<hr />
<h2 id="final-exam-checklist">Final exam checklist</h2>
<ul>
<li>CRD applied successfully</li>
<li>Schema present for v1 CRDs</li>
<li>metadata.name = plural.group</li>
<li>Exactly one <code>storage: true</code></li>
<li>At least one <code>served: true</code></li>
<li>Scope respected</li>
<li>Correct plural used in kubectl commands</li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../question/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../question/" class="btn btn-xs btn-link">
        Question
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../06-cluster-certificates-and-kube-system%20%5Bimportant%5D/kubeadm-certs/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../06-cluster-certificates-and-kube-system%20%5Bimportant%5D/kubeadm-certs/" class="btn btn-xs btn-link">
        kubeadm Certificate Checks &amp; Renewal
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>