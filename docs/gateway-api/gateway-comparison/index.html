
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Preparation notes for CKA">
      
      
        <meta name="author" content="Vikash Kumar">
      
      
        <link rel="canonical" href="https://github.com/OpsAlchemy/kubequest.git/docs/gateway-api/gateway-comparison/">
      
      
        <link rel="prev" href="../gateway-api/">
      
      
        <link rel="next" href="../load-of-examples/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Gateway API vs Ingress Controller: Deep Dive into Complex Logic ðŸ§  - KillerCoda Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gateway-api-vs-ingress-controller-deep-dive-into-complex-logic" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KillerCoda Notes" class="md-header__button md-logo" aria-label="KillerCoda Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KillerCoda Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gateway API vs Ingress Controller: Deep Dive into Complex Logic ðŸ§ 
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KillerCoda Notes" class="md-nav__button md-logo" aria-label="KillerCoda Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    KillerCoda Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KillerCoda Notes â€“ CKA
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    14 ingress controller and resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    14 ingress controller and resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/nginx-ingress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NGINX Configs that Mimic Kubernetes Ingress Behavior
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/nginx-regex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Mystery of (/|$): NGINX Ingress Controller's Secret Sauce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/nginx-vs-ingress-compare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nginx vs ingress compare
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NGINX Location Block Master Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/north-south-traffic-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes NGINX Ingress â€” Complete Master Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-ingress-controller-and-resources/regex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Regex From Absolute Scratch - You WILL Understand This ðŸŽ¯
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Cluster architecture, installation & configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cluster architecture, installation & configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/apiserver-misconfigured-approach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kube-apiserver Crash (Static Pod)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/apiserver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Control Plane (kubeadm)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/cka-kubernetes-upgrade-complete-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Kubernetes Cluster Upgrade Guide for CKA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/etcd-backup-and-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    etcd Snapshot Backup and Restore (kubeadm)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/kubeadm-certificate-commands-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete kubeadm Certificate Management Command Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/kubeadm-cluster-init-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Cluster Initialization and Node Join Process Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/kubelet-misconfigured/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubelet Misconfigured
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/probing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Probes &amp; Health Endpoints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/rbac-namespace-scope-with-clusterrole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Namespacing ClusterRoles Using RoleBindings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/rbac-pipeline-serviceaccount-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes RBAC: Pipeline ServiceAccount with Cluster-Wide Read and Namespaced Deployment Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster%20architecture%2C%20installation%20%26%20configuration/vimsetpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Minimal Vim Configuration for CKA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Gateway api
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Gateway api
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gateway-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Gateway API: Complete Master Guide ðŸš€
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Gateway API vs Ingress Controller: Deep Dive into Complex Logic ðŸ§ 
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway API vs Ingress Controller: Deep Dive into Complex Logic ðŸ§ 
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-core-philosophical-difference" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸŽ¯ The Core Philosophical Difference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸŽ¯ The Core Philosophical Difference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-where-should-traffic-go" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller: "WHERE should traffic go?"
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-what-should-happen-to-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API: "WHAT should happen to traffic?"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-logic-examples-side-by-side-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”„ Complex Logic Examples: Side-by-Side Comparison
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ”„ Complex Logic Examples: Side-by-Side Comparison">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-ab-testing-with-header-based-routing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: A/B Testing with Header-based Routing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1: A/B Testing with Header-based Routing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-hacky-limited" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Hacky, Limited)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-native-clean" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Native, Clean)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-api-versioning-with-complex-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: API Versioning with Complex Logic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2: API Versioning with Complex Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-route-based-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Route based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-impossible-as-single-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Impossible as single resource)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-single-resource-clear-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Single resource, clear logic)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-multi-tenant-saas-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Multi-Tenant SaaS Application
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 3: Multi-Tenant SaaS Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-different-routing-based-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Different routing based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-complex-fragile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Complex, Fragile)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-elegant-scalable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Elegant, Scalable)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-advanced-traffic-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 4: Advanced Traffic Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 4: Advanced Traffic Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-smart-routing-with" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Smart routing with:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-vendor-specific-limited" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Vendor-specific, Limited)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-standardized-extensible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Standardized, Extensible)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-5-real-time-analytics-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 5: Real-time Analytics Pipeline
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 5: Real-time Analytics Pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-route-based-on_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Route based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API Solution:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mental-model-shift" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ§  The Mental Model Shift
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ§  The Mental Model Shift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller Thinking:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API Thinking:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-reality" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”§ Implementation Reality
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ”§ Implementation Reality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gateway-api-its-actually-multiple-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API: It's Actually MULTIPLE Controllers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capability-comparison-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ“Š Capability Comparison Matrix
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-path-complex-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸš€ Migration Path: Complex Logic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸš€ Migration Path: Complex Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-ingress-monolithic-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Before (Ingress - Monolithic Config):
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-gateway-api-modular" class="md-nav__link">
    <span class="md-ellipsis">
      
        After (Gateway API - Modular):
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-gateway-api-shines" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ’¡ When Gateway API Shines
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ’¡ When Gateway API Shines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-use-cases-where-gateway-api-excels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex Use Cases Where Gateway API Excels:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-ingress-is-still-okay" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Ingress is Still Okay:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-bottom-line" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸŽ¯ The Bottom Line
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-proof-your-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”® Future-Proof Your Infrastructure
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../load-of-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Gateway API Complete Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Services & networking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services & networking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services-%26-networking/ingress-cli-pathType-and-class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating Ingress via kubectl CLI with Prefix Paths and IngressClass
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services-%26-networking/networkpolicy-cross-namespace-egress-ingress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Restricting Cross-Namespace Traffic Using NetworkPolicies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services-%26-networking/networkpolicy-egress-cross-namespace-label-based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Egress NetworkPolicy for Label-Based Cross-Namespace Access
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Storage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/affinity-with-hostPath-and-selector-on-pvc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    affinity with hostPath and selector on pvc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/cheatshett/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cheatshett
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/consumption/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consumption
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/minimal-pv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Minimal pv
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/standard-sc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standard sc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/usage-of-manual-sc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual StorageClass
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Workload & scheduling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workload & scheduling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/all-possible-way-to-create-secret/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Secrets - Complete Reference Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/configmap-env-and-volume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using ConfigMaps as Environment Variables and Volumes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/configmap-selective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configmap selective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/daemonset-troubleshooting-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DaemonSet YAML Troubleshooting Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/deployment-nodeName-scheduling-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment Scheduling Failure Due to Hard-Coded nodeName
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/deployment.strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment.strategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/multi-container-port-conflict/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CrashLoopBackOff Due to Port Conflict in Multi-Container Pod
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/pod-affinity-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Pod Affinity: Advanced Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workload-%26-scheduling/pod-priority-and-priorityclass-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pod Priority Using PriorityClass
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-core-philosophical-difference" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸŽ¯ The Core Philosophical Difference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸŽ¯ The Core Philosophical Difference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-where-should-traffic-go" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller: "WHERE should traffic go?"
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-what-should-happen-to-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API: "WHAT should happen to traffic?"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-logic-examples-side-by-side-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”„ Complex Logic Examples: Side-by-Side Comparison
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ”„ Complex Logic Examples: Side-by-Side Comparison">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-ab-testing-with-header-based-routing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: A/B Testing with Header-based Routing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1: A/B Testing with Header-based Routing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-hacky-limited" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Hacky, Limited)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-native-clean" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Native, Clean)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-api-versioning-with-complex-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: API Versioning with Complex Logic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2: API Versioning with Complex Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-route-based-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Route based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-impossible-as-single-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Impossible as single resource)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-single-resource-clear-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Single resource, clear logic)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-multi-tenant-saas-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Multi-Tenant SaaS Application
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 3: Multi-Tenant SaaS Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-different-routing-based-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Different routing based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-complex-fragile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Complex, Fragile)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-elegant-scalable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Elegant, Scalable)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-advanced-traffic-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 4: Advanced Traffic Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 4: Advanced Traffic Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-smart-routing-with" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Smart routing with:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller-vendor-specific-limited" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller (Vendor-specific, Limited)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-standardized-extensible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API (Standardized, Extensible)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-5-real-time-analytics-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 5: Real-time Analytics Pipeline
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 5: Real-time Analytics Pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-route-based-on_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario: Route based on:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API Solution:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mental-model-shift" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ§  The Mental Model Shift
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ§  The Mental Model Shift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress Controller Thinking:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API Thinking:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-reality" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”§ Implementation Reality
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ”§ Implementation Reality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gateway-api-its-actually-multiple-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway API: It's Actually MULTIPLE Controllers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capability-comparison-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ“Š Capability Comparison Matrix
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-path-complex-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸš€ Migration Path: Complex Logic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸš€ Migration Path: Complex Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-ingress-monolithic-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Before (Ingress - Monolithic Config):
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-gateway-api-modular" class="md-nav__link">
    <span class="md-ellipsis">
      
        After (Gateway API - Modular):
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-gateway-api-shines" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ’¡ When Gateway API Shines
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ’¡ When Gateway API Shines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-use-cases-where-gateway-api-excels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex Use Cases Where Gateway API Excels:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-ingress-is-still-okay" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Ingress is Still Okay:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-bottom-line" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸŽ¯ The Bottom Line
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-proof-your-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ”® Future-Proof Your Infrastructure
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="gateway-api-vs-ingress-controller-deep-dive-into-complex-logic">Gateway API vs Ingress Controller: Deep Dive into Complex Logic ðŸ§ </h1>
<h2 id="the-core-philosophical-difference">ðŸŽ¯ <strong>The Core Philosophical Difference</strong></h2>
<h3 id="ingress-controller-where-should-traffic-go"><strong>Ingress Controller:</strong> "WHERE should traffic go?"</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Ingress thinks: Match path â†’ Send to service</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/users</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user-service</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<h3 id="gateway-api-what-should-happen-to-traffic"><strong>Gateway API:</strong> "WHAT should happen to traffic?"</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Gateway API thinks: Analyze request â†’ Apply logic â†’ Route intelligently</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span><span class="w">                    </span><span class="c1"># WHAT to look for</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-User-Type</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">premium</span>
<span class="w">      </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/users</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span><span class="w">                    </span><span class="c1"># WHAT transformations to apply</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestHeaderModifier</span>
<span class="w">      </span><span class="nt">requestHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">add</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Priority</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;high&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplaceFullPath</span>
<span class="w">          </span><span class="nt">replaceFullPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/vip/users</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span><span class="w">                </span><span class="c1"># WHERE to send (with intelligence)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">premium-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</code></pre></div>
<hr />
<h2 id="complex-logic-examples-side-by-side-comparison">ðŸ”„ <strong>Complex Logic Examples: Side-by-Side Comparison</strong></h2>
<h3 id="example-1-ab-testing-with-header-based-routing"><strong>Example 1: A/B Testing with Header-based Routing</strong></h3>
<h4 id="ingress-controller-hacky-limited"><strong>Ingress Controller (Hacky, Limited)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Can&#39;t do this natively! Need annotations + custom templates</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/configuration-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">if ($http_x_experiment_group = &quot;new-ui&quot;) {</span>
<span class="w">        </span><span class="no">set $proxy_upstream &quot;new-ui-service.default.svc.cluster.local:80&quot;;</span>
<span class="w">      </span><span class="no">}</span>
<span class="w">      </span><span class="no">if ($http_x_experiment_group = &quot;old-ui&quot;) {</span>
<span class="w">        </span><span class="no">set $proxy_upstream &quot;old-ui-service.default.svc.cluster.local:80&quot;;</span>
<span class="w">      </span><span class="no">}</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default-service</span><span class="w">  </span><span class="c1"># Dummy</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p><strong>Problems:</strong>
- Vendor-specific annotations
- Hard-coded service names
- Error-prone configuration snippets
- No validation</p>
<h4 id="gateway-api-native-clean"><strong>Gateway API (Native, Clean)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ab-testing</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main-gateway</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Group A: New UI (header-based)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Experiment-Group</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new-ui&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">new-ui-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>

<span class="w">  </span><span class="c1"># Group B: Old UI (cookie-based)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cookie</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.*exp_group=old.*&quot;</span><span class="w">  </span><span class="c1"># Regex matching!</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">old-ui-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>

<span class="w">  </span><span class="c1"># Default: Split traffic 50/50</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">new-ui-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">old-ui-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
</code></pre></div>
<p><strong>Advantages:</strong>
- Native header matching
- Regex support in matches
- Weight-based traffic splitting
- Clear, structured configuration</p>
<hr />
<h3 id="example-2-api-versioning-with-complex-logic"><strong>Example 2: API Versioning with Complex Logic</strong></h3>
<h4 id="scenario-route-based-on"><strong>Scenario:</strong> Route based on:</h4>
<ol>
<li>URL path prefix (<code>/api/v1</code>, <code>/api/v2</code>)</li>
<li>Header (<code>X-API-Version</code>)</li>
<li>Query parameter (<code>?version=v2</code>)</li>
<li>Default to v1</li>
</ol>
<h4 id="ingress-controller-impossible-as-single-resource"><strong>Ingress Controller (Impossible as single resource)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Need MULTIPLE Ingress resources + complex rewrites</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v1</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/rewrite-target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/$2</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1(/|$)(.*)</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v1-service</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v2</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/configuration-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no"># Header-based routing hack</span>
<span class="w">      </span><span class="no">if ($http_x_api_version = &quot;v2&quot;) {</span>
<span class="w">        </span><span class="no">rewrite ^/api/(.*)$ /$1 break;</span>
<span class="w">        </span><span class="no">proxy_pass http://api-v2-service;</span>
<span class="w">      </span><span class="no">}</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v2(/|$)(.*)</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v2-service</span>
</code></pre></div>
<p><strong>Problems:</strong>
- Multiple resources
- Inconsistent configuration
- No priority ordering
- Fragile configuration snippets</p>
<h4 id="gateway-api-single-resource-clear-logic"><strong>Gateway API (Single resource, clear logic)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-versioning</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-gateway</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;api.example.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Rule 1: Explicit v2 in header (highest priority)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-API-Version</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v2&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestHeaderModifier</span>
<span class="w">      </span><span class="nt">requestHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">remove</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;X-API-Version&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v2-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Rule 2: Explicit v2 in query param</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">queryParams</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">version</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v2&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestRedirect</span>
<span class="w">      </span><span class="nt">requestRedirect</span><span class="p">:</span>
<span class="w">        </span><span class="nt">removeQueryParams</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;version&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v2-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Rule 3: Path-based v2</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v2</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v2-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Rule 4: Path-based v1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v1-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Rule 5: Default (catch-all)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-v1-service</span><span class="w">  </span><span class="c1"># Default to v1</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Key Insights:</strong>
- <strong>Priority</strong>: Rules evaluated in order (top to bottom)
- <strong>Clean separation</strong>: Each rule has clear purpose
- <strong>Built-in filters</strong>: No custom snippets needed
- <strong>Single resource</strong>: All logic in one place</p>
<hr />
<h3 id="example-3-multi-tenant-saas-application"><strong>Example 3: Multi-Tenant SaaS Application</strong></h3>
<h4 id="scenario-different-routing-based-on"><strong>Scenario:</strong> Different routing based on:</h4>
<ol>
<li>Subdomain (<code>tenant1.app.com</code>, <code>tenant2.app.com</code>)</li>
<li>Path prefix (<code>/admin</code>, <code>/api</code>, <code>/app</code>)</li>
<li>Tenant-specific backends</li>
<li>Global shared services</li>
</ol>
<h4 id="ingress-controller-complex-fragile"><strong>Ingress Controller (Complex, Fragile)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Would need separate Ingress for each tenant or complex rewrites</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multi-tenant</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/server-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no"># Extract tenant from host</span>
<span class="w">      </span><span class="no">set $tenant &quot;&quot;;</span>
<span class="w">      </span><span class="no">if ($host ~* ^([a-z0-9-]+)\.app\.com$) {</span>
<span class="w">        </span><span class="no">set $tenant $1;</span>
<span class="w">      </span><span class="no">}</span>

<span class="w">      </span><span class="no"># Route to tenant-specific services</span>
<span class="w">      </span><span class="no">location ~ ^/api/(.*)$ {</span>
<span class="w">        </span><span class="no">if ($tenant = &quot;tenant1&quot;) {</span>
<span class="w">          </span><span class="no">proxy_pass http://tenant1-api-service/$1;</span>
<span class="w">        </span><span class="no">}</span>
<span class="w">        </span><span class="no">if ($tenant = &quot;tenant2&quot;) {</span>
<span class="w">          </span><span class="no">proxy_pass http://tenant2-api-service/$1;</span>
<span class="w">        </span><span class="no">}</span>
<span class="w">        </span><span class="no"># ... and so on for each tenant</span>
<span class="w">      </span><span class="no">}</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.app.com&quot;</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default-placeholder</span>
</code></pre></div>
<p><strong>Problems:</strong>
- Configuration explosion
- Hard-coded tenant logic
- Difficult to maintain
- No tenant isolation</p>
<h4 id="gateway-api-elegant-scalable"><strong>Gateway API (Elegant, Scalable)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Infrastructure Team: Creates shared gateway</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">saas-gateway</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">gatewayClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shared-gateway</span>
<span class="w">  </span><span class="nt">listeners</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wildcard</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTP</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.app.com&quot;</span>

<span class="c1"># Tenant 1 Team: Manages their own routes</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1-routes</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span><span class="w">  </span><span class="c1"># Each tenant in their own namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">saas-gateway</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;tenant1.app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span><span class="w">  </span><span class="c1"># Cross-namespace reference!</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/admin</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-service</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">backendRefs</span><span class="p">:</span><span class="w">  </span><span class="c1"># Default route</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-service</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3000</span>

<span class="c1"># Tenant 2 Team: Same pattern, different namespace</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant2-routes</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant2</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">saas-gateway</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure</span>
<span class="w">  </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;tenant2.app.com&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">  </span><span class="c1"># Tenant 2&#39;s specific routes</span>

<span class="c1"># Security: ReferenceGrant for cross-namespace access</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReferenceGrant</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-tenants-to-gateway</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">from</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant2</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
</code></pre></div>
<p><strong>Architecture Benefits:</strong>
- <strong>Namespace isolation</strong>: Each tenant isolated
- <strong>Self-service</strong>: Tenants manage their own routes
- <strong>Security</strong>: Explicit cross-namespace grants
- <strong>Scalability</strong>: Add tenants without touching gateway</p>
<hr />
<h3 id="example-4-advanced-traffic-management"><strong>Example 4: Advanced Traffic Management</strong></h3>
<h4 id="scenario-smart-routing-with"><strong>Scenario:</strong> Smart routing with:</h4>
<ol>
<li>Circuit breaking</li>
<li>Retry policies</li>
<li>Timeout configuration</li>
<li>Request mirroring</li>
<li>Rate limiting</li>
</ol>
<h4 id="ingress-controller-vendor-specific-limited"><strong>Ingress Controller (Vendor-specific, Limited)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># NGINX-specific annotations</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/proxy-connect-timeout</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/proxy-read-timeout</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/proxy-send-timeout</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/limit-rps</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/configuration-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no"># Custom retry logic</span>
<span class="w">      </span><span class="no">proxy_next_upstream error timeout http_502 http_503;</span>
<span class="w">      </span><span class="no">proxy_next_upstream_tries 3;</span>

<span class="w">      </span><span class="no"># Request mirroring hack</span>
<span class="w">      </span><span class="no">mirror /mirror;</span>
<span class="w">      </span><span class="no">mirror_request_body on;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/server-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">location = /mirror {</span>
<span class="w">        </span><span class="no">internal;</span>
<span class="w">        </span><span class="no">proxy_pass http://mirror-service$request_uri;</span>
<span class="w">      </span><span class="no">}</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p><strong>Problems:</strong>
- Vendor lock-in
- Inconsistent annotation names
- Complex snippets
- Limited functionality</p>
<h4 id="gateway-api-standardized-extensible"><strong>Gateway API (Standardized, Extensible)</strong></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">advanced-routing</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production-gateway</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PathPrefix</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<span class="w">    </span><span class="c1"># FILTER CHAIN - Sequential processing</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 1. Rate limiting</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtensionRef</span>
<span class="w">      </span><span class="nt">extensionRef</span><span class="p">:</span>
<span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io</span>
<span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RateLimitPolicy</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-rate-limit</span>

<span class="w">    </span><span class="c1"># 2. Request modification</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestHeaderModifier</span>
<span class="w">      </span><span class="nt">requestHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">set</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Request-ID</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{uuid}}&quot;</span>
<span class="w">        </span><span class="nt">add</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Forwarded-For</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{client_ip}}&quot;</span>

<span class="w">    </span><span class="c1"># 3. Request mirroring (for debugging)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestMirror</span>
<span class="w">      </span><span class="nt">requestMirror</span><span class="p">:</span>
<span class="w">        </span><span class="nt">backendRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug-service</span>
<span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w">  </span><span class="c1"># 100% of traffic mirrored</span>

<span class="w">    </span><span class="c1"># 4. URL rewriting</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplacePrefixMatch</span>
<span class="w">          </span><span class="nt">replacePrefixMatch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/v1/api</span>

<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">      </span><span class="c1"># BACKEND-SPECIFIC POLICIES</span>
<span class="w">      </span><span class="nt">filters</span><span class="p">:</span><span class="w">  </span><span class="c1"># Filters that apply only to this backend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtensionRef</span>
<span class="w">        </span><span class="nt">extensionRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io</span>
<span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RetryPolicy</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-retry-policy</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtensionRef</span>
<span class="w">        </span><span class="nt">extensionRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io</span>
<span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TimeoutPolicy</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-timeout-policy</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtensionRef</span>
<span class="w">        </span><span class="nt">extensionRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io</span>
<span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CircuitBreakerPolicy</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-circuit-breaker</span>
</code></pre></div>
<p><strong>Supporting Policy Resources:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Rate Limit Policy (Extension)</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RateLimitPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-rate-limit</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">targetRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">advanced-routing</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">clientSelectors</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-API-Key</span>
<span class="w">    </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">      </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>

<span class="c1"># Retry Policy</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RetryPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-retry-policy</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">targetRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BackendRef</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<span class="w">  </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">retryOn</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5xx&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;gateway-error&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;connect-failure&quot;</span>
</code></pre></div></p>
<p><strong>Key Concept: Policy Attachment</strong>
- Policies can target: Gateway, HTTPRoute, or BackendRef
- Separation of routing logic from policy logic
- Reusable policies across routes</p>
<hr />
<h3 id="example-5-real-time-analytics-pipeline"><strong>Example 5: Real-time Analytics Pipeline</strong></h3>
<h4 id="scenario-route-based-on_1"><strong>Scenario:</strong> Route based on:</h4>
<ol>
<li>Content type (<code>application/json</code> vs <code>application/protobuf</code>)</li>
<li>Message size (small vs large payloads)</li>
<li>Priority headers</li>
<li>Geographic location</li>
</ol>
<h4 id="gateway-api-solution"><strong>Gateway API Solution:</strong></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analytics-pipeline</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parentRefs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analytics-gateway</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># High-priority, small JSON payloads</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Content-Type</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Priority</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;high&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestHeaderModifier</span>
<span class="w">      </span><span class="nt">requestHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">add</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Processing-Tier</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;realtime&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">realtime-processor</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Large payloads (batch processing)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Content-Type</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtensionRef</span>
<span class="w">      </span><span class="nt">extensionRef</span><span class="p">:</span>
<span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom.company.io</span>
<span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SizeBasedRouter</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">payload-router</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w">  </span><span class="c1"># Dynamic routing based on filter</span>

<span class="w">  </span><span class="c1"># Protobuf payloads (specialized processor)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Content-Type</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/protobuf&quot;</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URLRewrite</span>
<span class="w">      </span><span class="nt">urlRewrite</span><span class="p">:</span>
<span class="w">        </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;protobuf-processor.internal&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">protobuf-processor</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Geographic routing</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regex</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CF-IPCountry</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^(EU|UK|DE)$&quot;</span><span class="w">  </span><span class="c1"># European traffic</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RequestHeaderModifier</span>
<span class="w">      </span><span class="nt">requestHeaderModifier</span><span class="p">:</span>
<span class="w">        </span><span class="nt">add</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Data-Location</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eu-west&quot;</span>
<span class="w">    </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eu-processor</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="c1"># Default: US processing</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">backendRefs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-processor</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Advanced Features Demonstrated:</strong>
- <strong>Header regex matching</strong>
- <strong>Custom extension filters</strong>
- <strong>Dynamic routing</strong>
- <strong>Hostname rewriting</strong>
- <strong>Geographic routing</strong></p>
<hr />
<h2 id="the-mental-model-shift">ðŸ§  <strong>The Mental Model Shift</strong></h2>
<h3 id="ingress-controller-thinking"><strong>Ingress Controller Thinking:</strong></h3>
<div class="highlight"><pre><span></span><code>Request â†’ [Path Match] â†’ [Service]
           â”‚
           â””â”€ Simple if/else logic
</code></pre></div>
<h3 id="gateway-api-thinking"><strong>Gateway API Thinking:</strong></h3>
<div class="highlight"><pre><span></span><code>Request â†’ [Match Conditions] â†’ [Filter Chain] â†’ [Backend Selection]
           â”‚                    â”‚                 â”‚
           â”œâ”€ Headers           â”œâ”€ Transform      â”œâ”€ Weighted
           â”œâ”€ Path              â”œâ”€ Modify         â”œâ”€ Health-aware
           â”œâ”€ Query params      â”œâ”€ Redirect       â””â”€ Policy-bound
           â”œâ”€ Method            â”œâ”€ Mirror
           â””â”€ AND/OR logic      â””â”€ Extend
</code></pre></div>
<hr />
<h2 id="implementation-reality">ðŸ”§ <strong>Implementation Reality</strong></h2>
<h3 id="gateway-api-its-actually-multiple-controllers"><strong>Gateway API: It's Actually MULTIPLE Controllers</strong></h3>
<div class="highlight"><pre><span></span><code>graph TB
    User[User/Dev] --&gt; HTTPRoute[Creates HTTPRoute]
    HTTPRoute --&gt; GatewayAPI[Gateway API CRDs]
    GatewayAPI --&gt; GWC[GatewayClass Controller]
    GatewayAPI --&gt; GW[Gateway Controller]

    GWC --&gt; ImplA[NGINX Implementation]
    GWC --&gt; ImplB[Istio Implementation]
    GWC --&gt; ImplC[Contour Implementation]

    GW --&gt; LoadBalancer[Cloud Load Balancer]

    ImplA --&gt; ConfigA[NGINX Config]
    ImplB --&gt; ConfigB[Envoy Config]
    ImplC --&gt; ConfigC[Contour Config]

    ConfigA --&gt; DataPlane[Data Plane]
    ConfigB --&gt; DataPlane
    ConfigC --&gt; DataPlane
</code></pre></div>
<hr />
<h2 id="capability-comparison-matrix">ðŸ“Š <strong>Capability Comparison Matrix</strong></h2>
<table>
<thead>
<tr>
<th>Capability</th>
<th>Ingress</th>
<th>Gateway API</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AND/OR Conditions</strong></td>
<td>âŒ No</td>
<td>âœ… Yes</td>
<td><code>matches</code> with multiple criteria</td>
</tr>
<tr>
<td><strong>Header-based Routing</strong></td>
<td>âŒ Limited</td>
<td>âœ… Native</td>
<td>Regex, exact, prefix matching</td>
</tr>
<tr>
<td><strong>Query Param Routing</strong></td>
<td>âŒ No</td>
<td>âœ… Yes</td>
<td>Exact, regex matching</td>
</tr>
<tr>
<td><strong>Method-based Routing</strong></td>
<td>âŒ No</td>
<td>âœ… Yes</td>
<td>GET, POST, PUT, etc.</td>
</tr>
<tr>
<td><strong>Weighted Traffic Split</strong></td>
<td>âŒ Hacky</td>
<td>âœ… Native</td>
<td>Built-in weight field</td>
</tr>
<tr>
<td><strong>Request Transformation</strong></td>
<td>âŒ Annotations</td>
<td>âœ… Filters</td>
<td>Header mod, URL rewrite, redirect</td>
</tr>
<tr>
<td><strong>Response Transformation</strong></td>
<td>âŒ Limited</td>
<td>âœ… Filters</td>
<td>Header modification</td>
</tr>
<tr>
<td><strong>Request Mirroring</strong></td>
<td>âŒ Snippets</td>
<td>âœ… Native</td>
<td>Built-in filter</td>
</tr>
<tr>
<td><strong>Circuit Breaking</strong></td>
<td>âŒ No</td>
<td>âœ… Policies</td>
<td>Through extensions</td>
</tr>
<tr>
<td><strong>Rate Limiting</strong></td>
<td>âŒ Annotations</td>
<td>âœ… Policies</td>
<td>Standardized</td>
</tr>
<tr>
<td><strong>Retry Logic</strong></td>
<td>âŒ Snippets</td>
<td>âœ… Policies</td>
<td>Configurable retry policies</td>
</tr>
<tr>
<td><strong>Timeout Control</strong></td>
<td>âŒ Annotations</td>
<td>âœ… Policies</td>
<td>Route/backend level</td>
</tr>
<tr>
<td><strong>Cross-namespace</strong></td>
<td>âŒ Limited</td>
<td>âœ… Native</td>
<td>With ReferenceGrant</td>
</tr>
<tr>
<td><strong>Protocol Support</strong></td>
<td>HTTP only</td>
<td>HTTP, TCP, TLS, gRPC</td>
<td>Multiple route types</td>
</tr>
<tr>
<td><strong>Priority Ordering</strong></td>
<td>âŒ No</td>
<td>âœ… Yes</td>
<td>Rule order matters</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="migration-path-complex-logic">ðŸš€ <strong>Migration Path: Complex Logic</strong></h2>
<h3 id="before-ingress-monolithic-config"><strong>Before (Ingress - Monolithic Config):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># One giant Ingress with annotations</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/configuration-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no"># 200 lines of nginx config</span>
<span class="w">      </span><span class="no"># Mixed routing logic</span>
<span class="w">      </span><span class="no"># Vendor-specific hacks</span>
</code></pre></div>
<h3 id="after-gateway-api-modular"><strong>After (Gateway API - Modular):</strong></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Gateway (infrastructure)</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway</span>
<span class="c1"># ... gateway spec</span>

<span class="c1"># 2. Routing Logic (app team)</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>
<span class="c1"># ... routing rules</span>

<span class="c1"># 3. Policies (platform team)</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RateLimitPolicy</span>
<span class="c1"># ... rate limits</span>

<span class="c1"># 4. Extensions (custom needs)</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extensions.company.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomRouter</span>
<span class="c1"># ... custom logic</span>
</code></pre></div>
<hr />
<h2 id="when-gateway-api-shines">ðŸ’¡ <strong>When Gateway API Shines</strong></h2>
<h3 id="complex-use-cases-where-gateway-api-excels"><strong>Complex Use Cases Where Gateway API Excels:</strong></h3>
<ol>
<li><strong>Multi-tenant SaaS</strong> â†’ Namespace isolation + self-service</li>
<li><strong>A/B Testing</strong> â†’ Weighted routing + header matching</li>
<li><strong>API Versioning</strong> â†’ Multiple match criteria</li>
<li><strong>Geographic Routing</strong> â†’ Header-based + custom filters</li>
<li><strong>Content-based Routing</strong> â†’ Content-Type, size, etc.</li>
<li><strong>Migration Strategies</strong> â†’ Canary, blue-green</li>
<li><strong>Security Policies</strong> â†’ Rate limiting, authentication</li>
<li><strong>Observability</strong> â†’ Request mirroring, logging</li>
</ol>
<h3 id="when-ingress-is-still-okay"><strong>When Ingress is Still Okay:</strong></h3>
<ul>
<li>Simple path-based routing</li>
<li>Quick prototypes</li>
<li>Legacy applications</li>
<li>When your team only knows Ingress</li>
</ul>
<hr />
<h2 id="the-bottom-line">ðŸŽ¯ <strong>The Bottom Line</strong></h2>
<p><strong>Gateway API is NOT just "Ingress v2"</strong> - it's a <strong>completely different paradigm</strong>:</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Ingress</th>
<th>Gateway API</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Mindset</strong></td>
<td>"Route traffic"</td>
<td>"Orchestrate traffic flow"</td>
</tr>
<tr>
<td><strong>Architecture</strong></td>
<td>Monolithic config</td>
<td>Modular, layered</td>
</tr>
<tr>
<td><strong>Flexibility</strong></td>
<td>Limited, vendor-specific</td>
<td>Extensible, standardized</td>
</tr>
<tr>
<td><strong>Team Collaboration</strong></td>
<td>Centralized control</td>
<td>Role-based, self-service</td>
</tr>
<tr>
<td><strong>Complex Logic</strong></td>
<td>Configuration snippets</td>
<td>Native constructs</td>
</tr>
</tbody>
</table>
<p><strong>The real power:</strong> Gateway API turns <strong>infrastructure configuration</strong> into <strong>application intent declaration</strong>. Instead of telling the system HOW to route, you tell it WHAT you want to achieve, and the system figures out the HOW.</p>
<hr />
<h2 id="future-proof-your-infrastructure">ðŸ”® <strong>Future-Proof Your Infrastructure</strong></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Today: Start with Gateway API</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPRoute</span>

<span class="c1"># Tomorrow: Add policies</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">policy.gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RetryPolicy</span>

<span class="c1"># Future: Custom extensions</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wasm.gateway.networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WASMFilter</span>

<span class="c1"># The pattern: Declarative â†’ Programmatic â†’ Intelligent</span>
</code></pre></div>
<p><strong>Start simple, add complexity as needed.</strong> Gateway API grows with your requirements, while Ingress hits a wall quickly with complex logic.</p>
<p><strong>Your infrastructure should understand your business logic, not just your network paths.</strong> That's the Gateway API promise. ðŸš€</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.sections", "navigation.top", "content.code.copy", "search.highlight"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>